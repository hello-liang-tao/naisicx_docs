🌟11.Arduino 超声波测距🌟
===================================

🎯 HC-SD04超声波
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

超声波模块利用声波的反射原理，声波发射器发射10us的超声波，声波被被测物体反射到超声波接收器，根据声音的速度340m/s，以及发射到反射回来的时间差，可以计算模块到被测物体的距离。

HC-SD04超声波最大可测量6m的距离，最短可以测量2cm的距离。

.. figure:: ../media/超声波.png
   :alt: SG90舵机
   :align: center

-----------------------------------

🎯 测量流程
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

模块TRIG管脚低电平持续10us，触发发射器发射8个40KHZ的超声波脉冲，同时ECHO管脚输出高电平。当接收器接收到超声波信号时候ECHO变为低电平，此时高电平持续时间就是声波往返时间。


🎯 测量程序
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

程序中使用 :guilabel:`pulseIn()` 函数来获取高电平持续时间。 默认ECHO低电平，发射脉冲时开始输出高电平直到接收到脉冲信号输出低电平。这个高电平持续时间通过pulseIn()函数读取。pulseIn()函数第一个参数时使用哪个管脚来接收电平信号，第二个参数是记录高电平时间还是低电平时间，单位是ms。

.. figure:: ../media/超声波接线.png
   :alt: SG90舵机
   :align: center

-----------------------------------

.. literalinclude:: ./../code/11.ultrasound/11.ultrasound.ino
   :caption: 10.servo.ino
   :language: c++
   :linenos:
   :name: 10.servo.ino



